\documentclass[a4wide,11pt]{article}
\usepackage[a4paper, total={6in, 8in}]{geometry}
\usepackage[dvips]{graphicx}
\usepackage{url}
\usepackage{epstopdf}
\usepackage{float}
\usepackage{csvsimple}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{fancyhdr}
\usepackage{graphicx}

\usepackage{xcolor}
\usepackage{textcomp}

\usepackage{pgfgantt}

\usepackage{enumitem}

\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\pagestyle{fancy}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
}
\urlstyle{same}


\definecolor{barblue}{RGB}{153,204,254}
\definecolor{groupblue}{RGB}{51,102,254}
\definecolor{linkred}{RGB}{165,0,33}
\definecolor{statusred}{RGB}{204,0,0}
\definecolor{statusgreen}{RGB}{0,153,0}
\definecolor{statusorange}{RGB}{245,184,0}
\definecolor{statusyellow}{RGB}{255,255,61}
\renewcommand\sfdefault{phv}
%\renewcommand\mddefault{mc} % this causes bold, italic, .. not to be displayed
\renewcommand\bfdefault{bc}
\setganttlinklabel{s-s}{START-TO-START}
\setganttlinklabel{f-s}{FINISH-TO-START}
\setganttlinklabel{f-f}{FINISH-TO-FINISH}
\sffamily

\usepackage{titling}

\pretitle{%
    \begin{center}
    \LARGE
    \includegraphics[scale=1.2]{logo/INDIGO_logo_transparent.png}\\[\bigskipamount]
}
\posttitle{\end{center}}


\begin{document}

\newcommand{\greenbox}[1]{\colorbox{statusgreen!90}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}
\newcommand{\graybox}[1]{\colorbox{gray!90}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}
\newcommand{\lightgraybox}[1]{\colorbox{gray!40}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}
\newcommand{\redbox}[1]{\colorbox{statusred}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}
\newcommand{\orangebox}[1]{\colorbox{statusorange}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}
\newcommand{\yellowbox}[1]{\colorbox{statusyellow}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}

\title{Software Quality Assurance (SQA) Report \\[0.7em] \large{22-26 Aug 2016}\\[1.5em] 
       \huge{\texttt{opie (OpenStack Preemptible Instances Extension)}}\\
}

\date{} 
\maketitle

\Large
\vspace{-3em}
\begin{center}
    \graybox{\strut SQA Progress Status}\greenbox{\strut COMPLETE}\\[0.5em]\greenbox{\strut \begin{huge}88\% done\end{huge}} 
\end{center}

\vspace{4em}

\large
\begin{center}
\begin{tabular}{ll}
    \hyperref[sec:repository]{GitHub repository} & \greenbox{COMPLETE} \\
    \hyperref[sec:code_style]{Code style adherence} & \greenbox{COMPLETE} \\
    \hyperref[sec:unit_test]{Code coverage} & \graybox{92\%}\\ 
    \hyperref[sec:func_int_test]{Functional/integration testing} & \greenbox{COMPLETE} \\
    \hyperref[sec:gitbook]{GitBook documentation} & \greenbox{COMPLETE} \\
    \hyperref[sec:configuration]{Automated deployment} & \redbox{NOT COMPLETE} \\
\end{tabular}
\end{center}


\normalsize 
\newpage

\part{Task Progress for the 1st Release}

%
% OpenProject tasks - pgfgantt
%
\hspace{-5em}
\begin{ganttchart}[
    canvas/.append style={fill=none, draw=black!5, line width=.75pt},
    hgrid style/.style={draw=black!5, line width=.75pt},
    vgrid={*1{draw=black!5, line width=.75pt}},
    today=12,
    today rule/.style={
    draw=black!64,
    dash pattern=on 3.5pt off 4.5pt,
    line width=1.5pt
    },
    today label font=\small\bfseries,
    title/.style={draw=none, fill=none},
    title label font=\bfseries\footnotesize,
    title label node/.append style={below=7pt},
    include title in canvas=false,
    bar label font=\mdseries\small\color{black!70},
    bar label node/.append style={left=2cm},
    bar/.append style={draw=none, fill=black!63},
    bar incomplete/.append style={fill=barblue},
    bar progress label font=\mdseries\footnotesize\color{black!70},
    group incomplete/.append style={fill=groupblue},
    group left shift=0,
    group right shift=0,
    group height=.5,
    group peaks tip position=0,
    group label node/.append style={left=.6cm},
    group progress label font=\bfseries\small,
    link/.style={-latex, line width=1.5pt, linkred},
    link label font=\scriptsize\bfseries,
    link label node/.append style={below left=-2pt and 0pt}
]{1}{12}
    \gantttitle[
        title label node/.append style={below left=7pt and -3pt}
    ]{WEEKS:\quad1}{1}
    \gantttitlelist{2,...,12}{1} \\
    \ganttgroup[progress=88]{\textbf{\#3767} opie SQA FOR 1ST RELEASE}{1}{12} \\
            \ganttbar[
            progress=100,
            name=WBS1A
        ]{\textbf{\#3770} Repository synchronization}{1}{12} \\
            \ganttbar[
            progress=100,
            name=WBS1A
        ]{\textbf{\#3773} Code style specification}{1}{12} \\
            \ganttbar[
            progress=75,
            name=WBS1A
        ]{\textbf{\#3776} Unit testing coverage}{1}{12} \\
            \ganttbar[
            progress=100,
            name=WBS1A
        ]{\textbf{\#3779} Functional and integration testing coverage}{1}{12} \\
            \ganttbar[
            progress=100,
            name=WBS1A
        ]{\textbf{\#3782} Configuration management}{1}{12} \\
            \ganttbar[
            progress=50,
            name=WBS1A
        ]{\textbf{\#3785} GitBook documentation}{1}{12} \\
     [grid]
\end{ganttchart}

%\newpage

\input{templates/title_repository.tex}
\label{sec:repository}
Repository exists under \texttt{indigo-dc} GitHub organization:
    \begin{itemize}
        \item \url{https://github.com/indigo-dc/opie}\
        \end{itemize}


\input{templates/title_codestyle.tex}
\label{sec:code_style}
\begin{tabular}{ll}
    Code style definition &
        \href{http://docs.openstack.org/developer/hacking/}{OpenStack Style Guidelines} \\
    Community/de-facto standard &
        \graybox{Yes} \\ 
    Exceptions & 
        \graybox{0} \\
    Richness & \graybox{\strut 111 (+pep8 +flake8)} \hspace{0.3em} \graybox{\strut Errors None} \graybox{\strut Warnings None} \href{http://docs.openstack.org/developer/hacking/}{link}
\end{tabular}

\subsection{Build status}
Last build status on Jenkins CI
\href{https://jenkins.indigo-datacloud.eu:8080//job/opie-codestyle/25}{opie-codestyle}.


 
 
\input{templates/title_unittest.tex}
\label{sec:unit_test}





\input{templates/title_functional_integration.tex}
\label{sec:func_int_test}

    No functional or integration testing provided.
    
\subsection{Test coverage}
\begin{enumerate}
        \item add\_retry\_host
        \item hosts\_up
        \item invalid\_max\_attempts
        \item max\_attempts
        \item post\_select\_populate
        \item schedule\_chooses\_best\_host
        \item schedule\_happy\_day
        \item schedule\_host\_pool
        \item schedule\_large\_host\_pool
        \item schedule\_with\_pci\_requests
        \item select\_destinations
        \item select\_destinations\_no\_valid\_host
        \item select\_destinations\_no\_valid\_host\_not\_enough
        \item select\_destinations\_notifications
        \item detect\_not\_overcommit
        \item detect\_overcommit\_cpu
        \item detect\_overcommit\_disk
        \item detect\_overcommit\_ram
        \item detect\_preemptible
        \item detect\_preemptible\_empty
        \item detect\_preemptible\_false
        \item hosts\_up
        \item schedule\_happy\_day
        \item schedule\_happy\_day\_preemptible
        \item select\_destinations
        \item select\_destinations\_kill\_preemptible
        \item select\_destinations\_kill\_preemptible\_empty
        \item select\_destinations\_premptible
        \item terminate\_preemptible\_instances
    \end{enumerate}


\subsection{Observations}
\begin{itemize}
        \item Product team has provided the command/s to deploy the automated testing.
    \end{itemize}


\input{templates/title_gitbook.tex}
\label{sec:gitbook}
Documentation available under \texttt{indigo-dc} GitBook organization: \vspace{0.1em} \begin{center}\url{https://indigo-dc.gitbooks.io/opie/content/}\end{center} 
\subsection{Types of documentation currently provided}
\begin{center}
\graybox{\strut Readme}
\graybox{\strut Developer guide}
\end{center}
\subsection{Observations}
\begin{itemize}
        \item Points to improve in the documentation: \begin{itemize} \item Describe the installation steps using the INDIGO repository. \item Explain what are preemptible instances, benefits, etc. \item Also required a description of the features/workflow (VMs are killed or suspended, how to enable/disable preemptible extension, could it be enabled for a certain tenant?, etc.) \end{itemize}
    \end{itemize}


\input{templates/title_configuration.tex}
\label{sec:configuration}


Product does not currently have an automated deployment at INDIGO-DataCloud's Jenkins CI.

\subsection{Observations}
\begin{itemize}
        \item From the product team: '\textit{opie needs manual configuration of the installed nova configuration files and the patching of one file, so a manual action is needed anyway. In this case I think that documentation is a better option, as the setup is not complicated at all. If I manage those files (i.e. /etc/nova/nova.conf) and they are already managed by the configuration management (i.e. puppet or ansible) there would be conflicts (at least in puppet you cannot define a resource twice). I could modify the file using augeas, but this is an external dependency for Puppet, that is often not installed. With this in mind, the configuration management module will only install the packages, so I do not know how to proceed.}'
    \end{itemize}


\newpage
\input{templates/title_annex.tex}

\end{document}