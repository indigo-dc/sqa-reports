\documentclass[a4wide,11pt]{article}
\usepackage[a4paper, total={6in, 8in}]{geometry}
\usepackage[dvips]{graphicx}
\usepackage{url}
\usepackage{epstopdf}
\usepackage{float}
\usepackage{csvsimple}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{fancyhdr}
\usepackage{graphicx}

\usepackage{xcolor}
\usepackage{textcomp}

\usepackage{pgfgantt}

\usepackage{enumitem}

\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\pagestyle{fancy}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
}
\urlstyle{same}


\definecolor{barblue}{RGB}{153,204,254}
\definecolor{groupblue}{RGB}{51,102,254}
\definecolor{linkred}{RGB}{165,0,33}
\definecolor{statusred}{RGB}{204,0,0}
\definecolor{statusgreen}{RGB}{0,153,0}
\definecolor{statusorange}{RGB}{245,184,0}
\definecolor{statusyellow}{RGB}{255,255,61}
\renewcommand\sfdefault{phv}
%\renewcommand\mddefault{mc} % this causes bold, italic, .. not to be displayed
\renewcommand\bfdefault{bc}
\setganttlinklabel{s-s}{START-TO-START}
\setganttlinklabel{f-s}{FINISH-TO-START}
\setganttlinklabel{f-f}{FINISH-TO-FINISH}
\sffamily

\usepackage{titling}

\pretitle{%
    \begin{center}
    \LARGE
    \includegraphics[scale=1.2]{logo/INDIGO_logo_transparent.png}\\[\bigskipamount]
}
\posttitle{\end{center}}


\begin{document}

\newcommand{\greenbox}[1]{\colorbox{statusgreen!90}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}
\newcommand{\graybox}[1]{\colorbox{gray!90}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}
\newcommand{\lightgraybox}[1]{\colorbox{gray!40}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}
\newcommand{\redbox}[1]{\colorbox{statusred}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}
\newcommand{\orangebox}[1]{\colorbox{statusorange}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}
\newcommand{\yellowbox}[1]{\colorbox{statusyellow}{\textcolor{white!90}{\textsf{\textbf{#1}}}}}

\title{Software Quality Assurance (SQA) Report \\[0.7em] \large{22-26 Aug 2016}\\[1.5em] 
       \huge{\texttt{Orchestrator}}\\
}

\date{} 
\maketitle

\Large
\vspace{-3em}
\begin{center}
    \graybox{\strut SQA Progress Status}\greenbox{\strut COMPLETE}\\[0.5em]\greenbox{\strut \begin{huge}80\% done\end{huge}} 
\end{center}

\vspace{4em}

\large
\begin{center}
\begin{tabular}{ll}
    \hyperref[sec:repository]{GitHub repository} & \greenbox{COMPLETE} \\
    \hyperref[sec:code_style]{Code style adherence} & \greenbox{COMPLETE} \\
    \hyperref[sec:unit_test]{Code coverage} & \graybox{28\%}\\ 
    \hyperref[sec:func_int_test]{Functional/integration testing} & \greenbox{COMPLETE} \\
    \hyperref[sec:gitbook]{GitBook documentation} & \greenbox{COMPLETE} \\
    \hyperref[sec:configuration]{Automated deployment} & \greenbox{COMPLETE} \\
\end{tabular}
\end{center}


\normalsize 
\newpage

\part{Task Progress for the 1st Release}

%
% OpenProject tasks - pgfgantt
%
\hspace{-5em}
\begin{ganttchart}[
    canvas/.append style={fill=none, draw=black!5, line width=.75pt},
    hgrid style/.style={draw=black!5, line width=.75pt},
    vgrid={*1{draw=black!5, line width=.75pt}},
    today=12,
    today rule/.style={
    draw=black!64,
    dash pattern=on 3.5pt off 4.5pt,
    line width=1.5pt
    },
    today label font=\small\bfseries,
    title/.style={draw=none, fill=none},
    title label font=\bfseries\footnotesize,
    title label node/.append style={below=7pt},
    include title in canvas=false,
    bar label font=\mdseries\small\color{black!70},
    bar label node/.append style={left=2cm},
    bar/.append style={draw=none, fill=black!63},
    bar incomplete/.append style={fill=barblue},
    bar progress label font=\mdseries\footnotesize\color{black!70},
    group incomplete/.append style={fill=groupblue},
    group left shift=0,
    group right shift=0,
    group height=.5,
    group peaks tip position=0,
    group label node/.append style={left=.6cm},
    group progress label font=\bfseries\small,
    link/.style={-latex, line width=1.5pt, linkred},
    link label font=\scriptsize\bfseries,
    link label node/.append style={below left=-2pt and 0pt}
]{1}{12}
    \gantttitle[
        title label node/.append style={below left=7pt and -3pt}
    ]{WEEKS:\quad1}{1}
    \gantttitlelist{2,...,12}{1} \\
    \ganttgroup[progress=80]{\textbf{\#3089} Orchestrator SQA FOR 1ST RELEASE}{1}{12} \\
            \ganttbar[
            progress=100,
            name=WBS1A
        ]{\textbf{\#3854} Repository synchronization}{1}{12} \\
            \ganttbar[
            progress=100,
            name=WBS1A
        ]{\textbf{\#3857} Code style specification}{1}{12} \\
            \ganttbar[
            progress=28,
            name=WBS1A
        ]{\textbf{\#3425} Unit testing coverage}{1}{12} \\
            \ganttbar[
            progress=100,
            name=WBS1A
        ]{\textbf{\#3428} Functional and integration testing coverage}{1}{12} \\
            \ganttbar[
            progress=100,
            name=WBS1A
        ]{\textbf{\#3092} Configuration management}{1}{12} \\
            \ganttbar[
            progress=50,
            name=WBS1A
        ]{\textbf{\#3098} GitBook documentation}{1}{12} \\
     [grid]
\end{ganttchart}

%\newpage

\input{templates/title_repository.tex}
\label{sec:repository}
Repository exists under \texttt{indigo-dc} GitHub organization:
    \begin{itemize}
        \item \url{https://github.com/indigo-dc/orchestrator.git}\
        \end{itemize}


\input{templates/title_codestyle.tex}
\label{sec:code_style}
\begin{tabular}{ll}
    Code style definition &
        \href{https://google.github.io/styleguide/javaguide.html}{Google Java Style} \\
    Community/de-facto standard &
        \graybox{Yes} \\ 
    Exceptions & 
        \graybox{0} \\
    Richness & \graybox{\strut 54} \hspace{0.3em} \graybox{\strut Errors 54} \graybox{\strut Warnings 0} \href{https://raw.githubusercontent.com/checkstyle/checkstyle/master/src/main/resources/google_checks.xml}{link}
\end{tabular}

\subsection{Build status}
Last build status on Jenkins CI
\href{https://jenkins.indigo-datacloud.eu:8080//job/orchestrator-codestyle/93}{orchestrator-codestyle}.


 
 
\input{templates/title_unittest.tex}
\label{sec:unit_test}

\begin{center}
% Trend graph (jenkins)
\textbf{Trend graph}\par\medskip
\includegraphics[scale=0.5]{/srv/sqa-reports/build/figs/graph_orchestrator-unittest.png}
\\
%\vspace{0.5em}
% Cobertura report (gantt chart)
%\textbf{Cobertura report}\par\medskip
\begin{ganttchart}[
    canvas/.append style={fill=none, draw=black!5, line width=.75pt},
    hgrid style/.style={draw=black!5, line width=.75pt},
    vgrid={*1{draw=black!5, line width=.75pt}},
    title/.style={draw=none, fill=none},
    %title label font=\bfseries\footnotesize,
    title label font=\normalsize,
    title label node/.append style={below=7pt},
    include title in canvas=false,
    bar label font=\mdseries\small\color{black!70},
    bar label node/.append style={left=2cm},
    bar/.append style={draw=none, fill=black!63},
    bar incomplete/.append style={fill=barblue},
    bar progress label font=\mdseries\footnotesize\color{black!70},
    group incomplete/.append style={fill=groupblue},
    group left shift=0,
    group right shift=0,
    group height=.5,
    group peaks tip position=0,
    group label node/.append style={left=.6cm},
    group progress label font=\bfseries\small,
    link/.style={-latex, line width=1.5pt, linkred},
    link label font=\scriptsize\bfseries,
    link label node/.append style={below left=-2pt and 0pt}
    ]{1}{5}
    \gantttitle{Cobertura Report}{-3} \\
    %\ganttgroup[progress=45]{Group 1}{1}{12} \\
            \ganttbar[progress=92.85714]{Packages (26.0/28.0)}{1}{3} \\
            \ganttbar[progress=88.495575]{Files (100.0/113.0)}{1}{3} \\
            \ganttbar[progress=84.496124]{Classes (109.0/129.0)}{1}{3} \\
            \ganttbar[progress=55.12953]{Methods (532.0/965.0)}{1}{3} \\
            \ganttbar[progress=39.81913]{Lines (1453.0/3649.0)}{1}{3} \\
            \ganttbar[progress=25.610859]{Conditionals (283.0/1105.0)}{1}{3} \\
     [grid]
\end{ganttchart}
\end{center}

\subsection{Build status}
    Last build status on Jenkins CI \href{https://jenkins.indigo-datacloud.eu:8080//job/orchestrator-unittest/87}{orchestrator-unittest}.
    
\subsection{Observations}
\begin{itemize}
        \item Unit testing coverage has decreased from last report (30\%).
    \end{itemize}



\input{templates/title_functional_integration.tex}
\label{sec:func_int_test}

\subsection{Build status}
Last build status on Jenkins CI
    \href{https://jenkins.indigo-datacloud.eu:8080//job/orchestrator-integration/41}{orchestrator-integration}.
    
\subsection{Test coverage}
\begin{enumerate}
        \item \underline{Functional tests}: WF tasks related to the external Services, using mocks (CloudProviderRanker, CMDB, SLAM, Monitoring, Notification callbacks) - 40\%.
        \item \underline{Integration tests}: (without mock) for external services (CloudProviderRanker, CMDB, SLAM - we had some problems with the last couple, but we will fix them soon).
    \end{enumerate}




\input{templates/title_gitbook.tex}
\label{sec:gitbook}
Documentation available under \texttt{indigo-dc} GitBook organization: \vspace{0.1em} \begin{center}\url{https://indigo-dc.gitbooks.io/orchestrator/content/}\end{center} 
\subsection{Types of documentation currently provided}
\begin{center}
\graybox{\strut Readme}
\graybox{\strut API documentation}
\graybox{\strut Deployment documentation}
\end{center}
\subsection{Observations}
\begin{itemize}
        \item Points to improve in the documentation:\begin{itemize} \item README \begin{itemize} \item Explain what CMF stands for \item Elaborate on the role of the orchestrator within INDIGO infrastructure, from where are this high-level requests received, .. \item Describe briefly the role of the dependant services (slam, cmdb, zabbix wrapper, cloudproviderranker), are all needed? \item Explain what interfaces does the product support \item Provide examples if needed \end{itemize} \item Deployment guide \begin{itemize} \item Add a note about deploying the container using indigodatacloud/orchestrator repository. \item Explain why Chronos is needed, same for Onedata; what is their role, are they essential, etc. \item How to get a Onezone token and the rest of values for onedata variables (examples or links could help here) \end{itemize} \item Create a new section with the REST APIs pointing to http://indigo-dc.github.io/orchestrator/restdocs/) \end{itemize}
    \end{itemize}


\input{templates/title_configuration.tex}
\label{sec:configuration}



\subsection{Observations}
\begin{itemize}
        \item The orchestrator is a dockerized service that runs on the kubernetes cluster, and the few configurations that it needs can be expressed via environment variables, so it doesn't really need any configuration management tool.
    \end{itemize}


\newpage
\input{templates/title_annex.tex}

\end{document}